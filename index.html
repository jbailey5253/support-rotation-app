<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Support Ticket Rotation</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .list { margin: 20px 0; }
    .list ul { list-style-type: none; padding: 0; }
    .list li { padding: 5px; }
    .top-name { font-weight: bold; color: green; }
    .unavailable { color: red; text-decoration: line-through; }
  </style>
</head>
<body>

  <h2>Support Rotation</h2>

  <div class="list">
    <h3>Team A</h3>
    <ul id="teamA"></ul>
    <button onclick="assignNext('A')">Assign Next Ticket (Team A)</button>
  </div>

  <div class="list">
    <h3>Team B</h3>
    <ul id="teamB"></ul>
    <button onclick="assignNext('B')">Assign Next Ticket (Team B)</button>
  </div>

  <script>
    const teams = {
      A: [
        { name: 'Lynnette', available: true },
        { name: 'Dack', available: true },
        { name: 'Shay', available: true },
        { name: 'Dami', available: true },
        { name: 'Anna', avialable: true }
      ],
      B: [
        { name: 'Jake', available: true },
        { name: 'Tyler', available: true },
        { name: 'David', available: true },
        { name: 'Zachary', avialable: true },
        { name: 'Paul', avialable: true }
      ]
    };

    function render(teamKey) {
      const list = document.getElementById(`team${teamKey}`);
      list.innerHTML = '';
      teams[teamKey].forEach((person, index) => {
        const li = document.createElement('li');
        li.className = index === 0 ? 'top-name' : '';
        if (!person.available) li.classList.add('unavailable');
        li.textContent = person.name + (index === 0 ? ' (Next)' : '');
        li.onclick = () => toggleAvailability(teamKey, index);
        list.appendChild(li);
      });
    }

    function toggleAvailability(teamKey, index) {
      teams[teamKey][index].available = !teams[teamKey][index].available;
      render(teamKey);
    }

function assignNext(teamKey) {
  let team = teams[teamKey];

  if (team[0].available) {
    // Top person is available: rotate them to bottom
    const person = team.shift();
    team.push(person);
    showAssignment(`${person.name} is assigned the ticket.`);
  } else {
    // Top person is unavailable: find next available (starting at index 1)
    let assignedIndex = -1;
    for (let i = 1; i < team.length; i++) {
      if (team[i].available) {
        assignedIndex = i;
        break;
      }
    }

    if (assignedIndex !== -1) {
      const assignedPerson = team.splice(assignedIndex, 1)[0]; // Remove from current spot
      team.push(assignedPerson); // Add to end
      showAssignment(`${assignedPerson.name} is assigned the ticket (top person unavailable).`);
    } else {
      showAssignment("No available team members.");
    }
  }

  render(teamKey);
}
    function showAssignment(message) {
  let div = document.getElementById("assignment-msg");
  if (!div) {
    div = document.createElement("div");
    div.id = "assignment-msg";
    div.style.marginTop = "20px";
    div.style.fontWeight = "bold";
    document.body.appendChild(div);
  }
  div.textContent = message;
}

    // Initial render
    render('A');
    render('B');
  </script>

</body>
</html>
